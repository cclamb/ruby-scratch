#!/usr/bin/env ruby

require 'socket'
require 'aws-sdk'
require 'net/http'
require 'uri'


hostname = Socket.gethostname

if ARGF.argv.size > 0
  puts "Starting spinner on #{hostname}, ARGF: #{ARGF.argv}.\n"
else
  puts "Starting spinner on #{hostname}."
end


uri = URI::Parse ARGF.argv[0]
response = Net::HTTP.get_response uri

puts "Response: #{response}"

Process::daemon true, false

continue = true
cnt = 0

while continue
	sleep 5
	cnt += 1
	break if cnt > 5
end
